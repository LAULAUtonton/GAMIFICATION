
<!DOCTYPE html>
<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vocabulary Station</title>

<style>

/* DARK METAL GRAY BACKGROUND + WHITE TEXT */
body {
    background: linear-gradient(135deg, #2b2b2b, #1f1f1f, #2a2a2a);
    color: white;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

/* UNIVERSAL ACTIVITY COLORS */
.ordering-theme { background: #00B0FF20; border-left: 6px solid #00B0FF; }
.matching-theme { background: #AB47BC20; border-left: 6px solid #AB47BC; }
.trivia-theme { background: #4CAF5020; border-left: 6px solid #4CAF50; }
.fill-theme { background: #EF535020; border-left: 6px solid #EF5350; }
.builder-theme { background: #FDD83520; border-left: 6px solid #FDD835; }
.listen-theme { background: #FFA72620; border-left: 6px solid #FFA726; }
.read-theme { background: #5C6BC020; border-left: 6px solid #5C6BC0; }
.speak-theme { background: #26C6DA20; border-left: 6px solid #26C6DA; }

/* FIXED BOTTOM BAR ‚Äî PURPLE */
.fixed-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #6A1B9A;
    padding: 12px;
    display: flex;
    justify-content: center;
    gap: 20px;
    z-index: 9999;
    border-top: 2px solid #4A0072;
    backdrop-filter: blur(6px);
}

/* YELLOW BUTTONS */
.bar-btn {
    background: #FFEB3B;
    color: #1A1A1A;
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-size: 16px;
}
.bar-btn:hover { background: #FBC02D; color: black; }

/* GENERAL LAYOUT */
.screen {
    display: none;
    padding: 30px;
    margin-bottom: 100px;
    border-radius: 12px;
}
#main {
    padding: 30px;
    margin-bottom: 100px;
}
button {
    padding: 12px 20px;
    margin: 10px;
    border-radius: 10px;
    border: none;
    background: #4FC3F7;
    cursor: pointer;
    font-size: 18px;
    color: black;
}
button:hover { background: #0288D1; color: white; }

/* ========================= */
/* UNIVERSAL HUD CSS */
/* ========================= */

#progress-container {
    width: 100%;
    height: 12px;
    background: #444;
    border-bottom: 2px solid #222;
}
#progress-bar {
    width: 0%;
    height: 100%;
    background: #FFEB3B;
    transition: width 0.4s ease;
}

#hud-row {
    display: flex;
    gap: 10px;
    padding: 10px 20px;
}

#score-box {
    padding: 10px 20px;
    font-size: 20px;
    background: #6A1B9A;
    border-radius: 10px;
}

#timer-box {
    padding: 10px 20px;
    font-size: 20px;
    background: #AB47BC;
    border-radius: 10px;
}

#tip-box {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #333;
    padding: 15px 20px;
    border-radius: 10px;
    border: 2px solid #FFEB3B;
    font-size: 16px;
    max-width: 250px;
    color: white;
    z-index: 9999;
}

</style>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THE PIT ‚Äì Games Station</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>THE PIT ‚Äî Games Station</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">

  <style>
    :root{--bg1:#dbeafe;--bg2:#2563eb;--bg3:#0b1a44;--ink:#0f172a;--panel:#f8fafc;--line:#bfdbfe;--brand:#1d4ed8;--ok:#166534;--bad:#991b1b}
    :root{
      --bg1:#bfe7ff;
      --bg2:#0ea5e9;
      --bg3:#082f49;
      --ink:#0b1220;
      --panel:#ffffff;
      --card:#f0f9ff;
      --line:#7dd3fc;
      --brand:#0284c7;
      --ok:#16a34a;
      --bad:#ef4444;
      --warn:#f59e0b;
      --shadow: 0 22px 60px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Orbitron',sans-serif;background:radial-gradient(circle,var(--bg1) 0%,var(--bg2) 56%,var(--bg3) 100%);color:var(--ink)}
    .app{width:min(1120px,95vw);margin:14px auto 92px;background:#fff;border-radius:20px;padding:14px;box-shadow:0 18px 42px rgba(2,6,23,.45)}
    h1{margin:0;text-align:center;color:#1e3a8a;font-size:clamp(20px,4vw,30px)}
    .sub{margin:6px 0 10px;text-align:center;color:var(--brand);font-size:12px}

    .hud{display:grid;grid-template-columns:repeat(4,minmax(120px,1fr));gap:8px;margin-bottom:10px}
    .box{background:#eff6ff;border:2px solid #93c5fd;border-radius:10px;padding:9px;font-size:12px;font-weight:800;color:#1e3a8a}
    .tip{background:#ecfeff;border:2px solid #67e8f9;border-radius:10px;padding:10px;font-size:12px;color:#0f766e;margin-bottom:10px}

    .gameMenu{display:grid;grid-template-columns:repeat(4,minmax(150px,1fr));gap:8px;margin-bottom:10px}
    .gameBtn{border:2px solid var(--line);background:#fff;color:#1e3a8a;border-radius:10px;padding:10px;font-family:inherit;font-size:11px;font-weight:800;cursor:pointer;text-align:left}
    .gameBtn.active{background:#dbeafe;border-color:#2563eb}

    .panel{display:none;background:var(--panel);border:2px solid #cbd5e1;border-radius:12px;padding:12px}
    .panel.active{display:block}
    .panel h2{margin:0 0 8px;color:#1e3a8a;font-size:15px}
    .question{font-size:13px;margin:6px 0 8px}
    .answers{display:grid;gap:8px}
    .answers button{border:2px solid var(--line);background:#fff;color:#1e3a8a;border-radius:10px;padding:10px;font-family:inherit;font-size:11px;font-weight:800;text-align:left;cursor:pointer}
    .answers button:disabled{opacity:.85;cursor:not-allowed}
    .answers button.correct{background:#dcfce7;border-color:#22c55e;color:var(--ok)}
    .answers button.wrong{background:#fee2e2;border-color:#ef4444;color:var(--bad)}
    .feedback{min-height:18px;margin-top:8px;font-size:12px;font-weight:800}
    .ok{color:var(--ok)} .bad{color:var(--bad)}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .btn{border:0;border-radius:10px;padding:9px 12px;font-family:inherit;font-size:11px;font-weight:900;cursor:pointer}
    .primary{background:#2563eb;color:#fff}
    .soft{background:#e2e8f0;color:#0f172a}

    .pairsBoard{display:grid;grid-template-columns:repeat(4,minmax(66px,1fr));gap:8px}
    .pairCard{height:62px;border:2px solid var(--line);background:#dbeafe;border-radius:10px;font-family:inherit;font-size:11px;font-weight:800;color:#1e3a8a;cursor:pointer}
    .pairCard.open,.pairCard.matched{background:#fff}
    .pairCard.matched{border-color:#22c55e;color:#166534}

    .wheelCard{background:#eff6ff;border:2px dashed #93c5fd;border-radius:10px;padding:12px;font-size:12px;font-weight:800;color:#1e3a8a;min-height:54px}

    .anagramWord{font-size:13px;font-weight:900;color:#1e3a8a;margin:6px 0}
    .anagramInput{width:100%;border:2px solid var(--line);border-radius:10px;padding:10px;font-family:inherit;font-size:12px}

    .fixed{position:fixed;left:0;right:0;bottom:0;background:#0f172a;border-top:2px solid #1e293b;padding:8px;display:flex;justify-content:center;gap:8px;flex-wrap:wrap;z-index:20}
    .fixed button{border:0;border-radius:10px;padding:8px 10px;background:#dbeafe;color:#1e3a8a;font-family:inherit;font-size:11px;font-weight:900;cursor:pointer}

    @media (max-width:900px){.gameMenu{grid-template-columns:repeat(2,minmax(140px,1fr))}}
    @media (max-width:680px){
      .app{padding:10px;margin:8px auto 84px}
      .hud{grid-template-columns:repeat(2,minmax(120px,1fr))}
      .box,.tip{font-size:11px}
      .question{font-size:12px}
      .answers button,.gameBtn,.btn,.fixed button{font-size:10px}
      .pairsBoard{grid-template-columns:repeat(4,minmax(56px,1fr));gap:6px}
      .pairCard{height:56px;font-size:10px}
    body{
      margin:0;
      font-family: "Orbitron", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1100px 700px at 20% -10%, rgba(255,255,255,.28), transparent 55%),
        radial-gradient(circle, var(--bg1) 0%, var(--bg2) 55%, var(--bg3) 100%);
      color:var(--ink);
      min-height:100vh;
      padding:14px;
    }
  </style>
</head>

<body>
    .app{
      width:min(1200px, calc(100vw - 28px));
      margin:0 auto;
      background:var(--panel);
      border-radius:28px;
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.35);
      overflow:hidden;
    }

<!-- ========================= -->
<!-- UNIVERSAL HUD BLOCK -->
<!-- ========================= -->

<div id="progress-container">
    <div id="progress-bar"></div>
</div>

<div id="hud-row">
    <div id="score-box">Score: <span id="score">0</span></div>
    <div id="timer-box">Time: <span id="timer">00:00</span></div>
</div>

<div id="tip-box">
    <strong>Tip:</strong> <span id="tip-text">Choose an activity to begin!</span>
</div>

<!-- ========================= -->
<!-- END HUD BLOCK -->
<!-- ========================= -->

<!-- FIXED BOTTOM BAR -->
<div class="fixed-bar">
    <button class="bar-btn" onclick="goBack()">Back</button>
    <button class="bar-btn" onclick="location.href='../index.html'">Main Menu</button>
    <button class="bar-btn" onclick="alert('Paused')">Pause</button>
</div>

<!-- MAIN MENU -->
<div id="main">
    <h1>Vocabulary Station</h1>
    <button onclick="openScreen('matching')">Matching</button>
    <button onclick="openScreen('ordering')">Ordering</button>
    <button onclick="openScreen('fill')">Fill in the Blanks</button>
</div>

<!-- MATCHING -->
<div id="matching" class="screen matching-theme">
    <h2>Matching Activity</h2>
    <p>Match the words with their definitions.</p>
</div>

<!-- ORDERING -->
<div id="ordering" class="screen ordering-theme">
    <h2>Ordering Activity</h2>
    <p>Put the words in the correct order.</p>
</div>

<!-- FILL IN THE BLANKS -->
<div id="fill" class="screen fill-theme">
    <h2>Fill in the Blanks</h2>
    <p>Complete the sentences with the correct words.</p>
</div>
  <main class="app">
    <h1>GAMES STATION</h1>
    <p class="sub">Visible working apps: Quiz ‚Ä¢ Matching Pairs ‚Ä¢ Spin Wheel ‚Ä¢ Anagram</p>

    <section class="hud">
      <div class="box">SCORE: <span id="score">0</span></div>
      <div class="box">STARS: <span id="stars">0</span></div>
      <div class="box">TIME: <span id="timer">00:00</span></div>
      <div class="box">BEST APP: <span id="best">-</span></div>
    </section>
    .topbar{
      padding:18px 18px 14px;
      background: rgba(255,255,255,.65);
      border-bottom:1px solid rgba(2,132,199,.18);
      backdrop-filter: blur(8px);
    }
    h1{ margin:0; text-align:center; letter-spacing:2px; font-size:clamp(18px, 3.6vw, 30px); color:#083344; }
    .sub{ margin:8px 0 0; text-align:center; color:#075985; font-size:12px; line-height:1.35; font-weight:700; }

    .screen{display:none; padding:16px 16px 18px}
    .screen.active{display:block}

    .grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:12px; margin-top:10px; }
    .card{ background:var(--card); border:2px solid var(--line); border-radius:18px; padding:14px; display:flex; flex-direction:column; gap:10px; min-height:168px; }
    .card h3{ margin:0; color:#083344; font-size:16px; letter-spacing:.4px; }
    .card p{ margin:0; font-size:12px; color:#075985; line-height:1.5; font-weight:700; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin-top:auto; }

    .btn{ border:none; border-radius:14px; padding:12px 14px; font-weight:900; cursor:pointer; font-family: inherit; letter-spacing:.3px; transition: transform .08s ease, filter .12s ease; user-select:none; }
    .btn:hover{ filter:brightness(1.06) }
    .btn:active{ transform: translateY(1px) }
    .primary{ background: var(--brand); color:#fff; }
    .soft{ background:#ffffff; border:2px solid var(--line); color:#083344; }
    .disabled{ opacity:.55; cursor:not-allowed; }

    .gameHeader{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin-bottom:10px; }
    .pillRow{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .pill{ background:#e0f2fe; border:2px solid var(--line); border-radius:999px; padding:9px 11px; font-size:11px; font-weight:900; color:#083344; white-space:nowrap; }
    .info{ width:100%; background:#e0f2fe; border:2px solid var(--line); border-radius:16px; padding:10px 12px; font-size:12px; font-weight:800; color:#075985; line-height:1.35; }

    .gameWrap{ display:grid; grid-template-columns: minmax(0, 1fr) 300px; gap:12px; align-items:start; margin-top:10px; }

    .board{
      background:#020617;
      border:2px solid rgba(14,165,233,.95);
      border-radius:18px;
      padding:10px;
      display:grid;
      gap:3px;
      user-select:none;
      box-shadow: inset 0 0 0 1px rgba(56,189,248,.35), 0 0 22px rgba(14,165,233,.22);
      background-image:
        linear-gradient(rgba(56,189,248,.08) 1px, transparent 1px),
        linear-gradient(90deg, rgba(56,189,248,.08) 1px, transparent 1px);
      background-size: 24px 24px;
    }

    <div class="tip"><strong>Tip:</strong> <span id="tip">Open any app and play. Each app gives points and stars.</span></div>
    .cell{ border-radius:10px; display:flex; align-items:center; justify-content:center; text-align:center; line-height:1.05; font-weight:900; padding:4px; border:1px solid rgba(125,211,252,.28); background: rgba(14,165,233,.06); color: rgba(255,255,255,.92); position:relative; overflow:hidden; }
    .cell.word{ background: rgba(255,255,255,.07); border: 1px solid rgba(255,255,255,.22); color:#fff; }
    .cell.wall{ background: rgba(59,130,246,.18); border-color: rgba(59,130,246,.20); }

    .cell{ background-image: radial-gradient(circle, rgba(255,255,255,.45) 0 2px, transparent 3px); background-repeat:no-repeat; background-position:center; }
    .cell.wall, .cell.word, .cell.pac, .cell.ghost-blue, .cell.ghost-pink{ background-image:none; }

    .cell.pac::before{
      content:"";
      width: 40px;
      height: 40px;
      border-radius:50%;
      background:#facc15;
      position:absolute;
      box-shadow: 0 0 12px rgba(250,204,21,.65);
    }
    .cell.pac::after{
      content:"";
      position:absolute;
      left:50%;
      top:50%;
      width:0;
      height:0;
      border-top:10px solid transparent;
      border-bottom:10px solid transparent;
      border-left:16px solid #020617;
      margin-left:-1px;
      margin-top:-10px;
      transform: rotate(var(--rot, 0deg));
      transform-origin: -4px 50%;
      animation: chomp .22s ease-in-out infinite;
    }

    <section class="gameMenu" id="gameMenu">
      <button class="gameBtn active" data-panel="quiz">üìù Quiz App<br><small>3-question skill check</small></button>
      <button class="gameBtn" data-panel="pairs">üÉè Matching Pairs App<br><small>memory + vocabulary</small></button>
      <button class="gameBtn" data-panel="wheel">üéØ Spin Wheel App<br><small>random speaking/writing tasks</small></button>
      <button class="gameBtn" data-panel="anagram">üî§ Anagram App<br><small>unscramble words</small></button>
    </section>
    .cell.ghost-blue::before,
    .cell.ghost-pink::before{
      content:"";
      width: 32px;
      height: 34px;
      border-radius: 16px 16px 8px 8px;
      position:absolute;
      clip-path: polygon(0 0,100% 0,100% 82%,86% 100%,72% 82%,58% 100%,44% 82%,30% 100%,16% 82%,0 100%);
    }
    .cell.ghost-blue::before{ background:#2563eb; box-shadow: inset 0 -5px 0 0 #1d4ed8, 0 0 12px rgba(37,99,235,.55); }
    .cell.ghost-pink::before{ background:#f472b6; box-shadow: inset 0 -5px 0 0 #db2777, 0 0 12px rgba(244,114,182,.55); }
    .cell.ghost-blue::after,
    .cell.ghost-pink::after{
      content:"‚óâ ‚óâ";
      position:absolute;
      top:14px;
      color:#f8fafc;
      font-size:11px;
      letter-spacing:1px;
      font-weight:900;
    }

    .side{ background: var(--card); border:2px solid var(--line); border-radius:18px; padding:12px; }
    .side h4{ margin:0 0 10px; color:#083344; font-size:13px; letter-spacing:.6px; text-transform:uppercase; }
    .progressRow{ display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 10px; }
    .slot{ min-width:40px; padding:10px 10px; border-radius:12px; border:1px dashed rgba(2,132,199,.35); background: rgba(255,255,255,.6); font-weight:1000; text-align:center; color: rgba(7,89,133,.75); }
    .slot.filled{ border-style:solid; border-color: rgba(22,163,74,.45); background: rgba(22,163,74,.12); color:#083344; }

    .feedback{ min-height:26px; font-size:12px; font-weight:1000; line-height:1.2; margin-top:8px; color:#075985; }
    .feedback.ok{ color: var(--ok); }
    .feedback.bad{ color: var(--bad); }
    .feedback.warn{ color: var(--warn); }

    .controls{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; max-width: 240px; margin-top:10px; }
    .controls .btn{ padding:10px 10px; border-radius:14px; }

    <section id="panel-quiz" class="panel active">
      <h2>Quiz App</h2>
      <p id="quizQuestion" class="question"></p>
      <div id="quizAnswers" class="answers"></div>
      <div id="quizFeedback" class="feedback"></div>
      <div class="row">
        <button class="btn primary" id="quizNext" disabled>Next Question</button>
        <button class="btn soft" id="quizRestart">Restart Quiz</button>
    .small{ font-size:11px; color:#075985; font-weight:800; line-height:1.35; margin-top:10px; }
    .guide{ background:#e0f2fe; border:2px solid var(--line); border-radius:14px; padding:10px; color:#0b4f73; font-size:12px; font-weight:800; line-height:1.35; margin-bottom:10px; }
    .guide b{ color:#083344; }

    @keyframes chomp{
      0%,100%{ transform: rotate(var(--rot, 0deg)) scaleY(1); }
      50%{ transform: rotate(var(--rot, 0deg)) scaleY(.18); }
    }

    @media (max-width: 980px){ .gameWrap{ grid-template-columns: 1fr; } }
  </style>
</head>

<body>
  <main class="app">
    <header class="topbar">
      <h1>THE PIT ‚Äî GAMES STATION</h1>
      <p class="sub">
        Choose difficulty, then play PacSentence. The game shows the aim only, not the answers.
      </p>
    </header>

    <section id="menuScreen" class="screen active">
      <div class="grid">
        <article class="card">
          <h3>üü® PacSentence (Classic)</h3>
          <p>
            Pac-Man is yellow and circular. Blue ghost in Easy. Blue + pink ghosts in Hard.
          </p>
          <div class="row">
            <button id="startEasyBtn" class="btn primary">Start Easy</button>
            <button id="startHardBtn" class="btn primary">Start Hard</button>
            <button id="menuHomeBtn" class="btn soft" onclick="location.href='../index.html'">Main menu</button>
          </div>
        </article>

        <article class="card">
          <h3>üéØ Learning aims</h3>
          <p>
            Objectives may be: Word order, Find past-tense verbs, Find adjectives, or Find nouns.
          </p>
          <div class="row">
            <button class="btn soft disabled" disabled>Answers hidden</button>
            <button class="btn soft disabled" disabled>Shown only on fail</button>
          </div>
        </article>
      </div>
    </section>

    <section id="panel-pairs" class="panel">
      <h2>Matching Pairs App</h2>
      <div id="pairsBoard" class="pairsBoard"></div>
      <div id="pairsFeedback" class="feedback"></div>
      <div class="row">
        <button class="btn soft" id="pairsRestart">Restart Pairs</button>
    <section id="pacScreen" class="screen">
      <div class="gameHeader">
        <div class="pillRow">
          <div class="pill">Time: <span id="timer">00:00</span></div>
          <div class="pill">Lives: <span id="lives">3</span></div>
          <div class="pill">Objective: <span id="objectiveText">-</span></div>
          <div class="pill">Correct rounds: <span id="phrasesDone">0</span></div>
          <div class="pill">Status: <span id="statusText">In play</span></div>
          <div class="pill">Level: <span id="levelText">Easy</span></div>
        </div>
        <div class="pillRow">
          <button id="backToMenu" class="btn soft">Back</button>
          <button id="restartGame" class="btn soft">Restart</button>
          <button id="nextSentence" class="btn primary">Next round</button>
        </div>
      </div>
    </section>

    <section id="panel-wheel" class="panel">
      <h2>Spin Wheel App</h2>
      <div id="wheelResult" class="wheelCard">Press SPIN to get a challenge.</div>
      <div id="wheelFeedback" class="feedback"></div>
      <div class="row">
        <button class="btn primary" id="wheelSpin">SPIN</button>
      <div class="info" id="assignInfo">
        Game: PacSentence ¬∑ Auto-assigned skill: <b>Word order</b>
      </div>
    </section>

    <section id="panel-anagram" class="panel">
      <h2>Anagram App</h2>
      <p class="question">Unscramble this word:</p>
      <div id="anagramWord" class="anagramWord">-</div>
      <input id="anagramInput" class="anagramInput" placeholder="Type your answer" />
      <div id="anagramFeedback" class="feedback"></div>
      <div class="row">
        <button class="btn primary" id="anagramCheck">Check</button>
        <button class="btn soft" id="anagramNext">Next Anagram</button>
      <div class="gameWrap">
        <div>
          <div id="board" class="board" aria-label="PacSentence board"></div>
          <p class="small">
            Use <b>‚Üê ‚Üë ‚Üí ‚Üì</b> (or buttons), avoid ghosts, and complete the objective. Correct answers are hidden and only revealed if you lose.
          </p>
        </div>

        <aside class="side">
          <h4>Round guide</h4>
          <div class="guide">
            <b>Aim:</b> <span id="sideObjective">Order words in the sentence.</span><br>
            <b>How to play:</b> Eat the correct words and avoid ghosts.
          </div>
          <h4>Progress</h4>
          <div id="progressRow" class="progressRow"></div>

          <div id="feedback" class="feedback">Press ‚ÄúNext round‚Äù to start.</div>

          <div class="controls" aria-label="Controls">
            <span></span>
            <button class="btn soft" data-dir="up">‚Üë</button>
            <span></span>
            <button class="btn soft" data-dir="left">‚Üê</button>
            <button class="btn soft" data-dir="down">‚Üì</button>
            <button class="btn soft" data-dir="right">‚Üí</button>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <div class="fixed">
    <button onclick="location.href='../index.html'">Main Menu</button>
    <button id="pauseBtn">Pause/Resume Timer</button>
    <button id="resetBtn">Reset Score</button>
  </div>

<script>

/* SCREEN NAVIGATION */
function openScreen(id) {
    document.querySelectorAll('.screen, #main').forEach(s => s.style.display = 'none');
    document.getElementById(id).style.display = 'block';

    setTip("Complete the activity to earn points!");
    startTimer();
    setProgress(20);
}

function goBack() {
    document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
    document.getElementById('main').style.display = 'block';

    stopTimer();
    setTip("Choose an activity to begin!");
    setProgress(0);
}

/* ========================= */
/* UNIVERSAL HUD JS */
/* ========================= */

function setProgress(percent) {
    document.getElementById("progress-bar").style.width = percent + "%";
}

let score = 0;
function addScore(points) {
    score += points;
    document.getElementById("score").textContent = score;
}

let time = 0;
let timerInterval;

function startTimer() {
    stopTimer();
    time = 0;
    timerInterval = setInterval(() => {
        time++;
        let minutes = String(Math.floor(time / 60)).padStart(2, '0');
        let seconds = String(time % 60).padStart(2, '0');
        document.getElementById("timer").textContent = `${minutes}:${seconds}`;
    }, 1000);
}

function stopTimer() {
    clearInterval(timerInterval);
}

function setTip(text) {
    document.getElementById("tip-text").textContent = text;
}

  const state = {
    score: 0,
    stars: 0,
    best: '-',
    seconds: 0,
    paused: false,
    timerRef: null,
    quizIndex: 0,
    quizCorrect: 0,
    quizAnswered: false,
    pairsDeck: [],
    pairsOpen: [],
    anagramIndex: 0
  };

  const saved = JSON.parse(localStorage.getItem('pitGamesV4') || '{}');
  state.score = saved.score || 0;
  state.stars = saved.stars || 0;
  state.best = saved.best || '-';

  const quizData = [
    {q:'Choose the correct sentence.', options:['She go to school.','She goes to school.','She going school.','She gone school.'], correct:1},
    {q:'Past simple of "eat" is...', options:['eat','eaten','ate','eated'], correct:2},
    {q:'Best contrast connector is...', options:['because','although','and','so'], correct:1}
(() => {
  const ORDER_SENTENCES = [
    "Can you solve this puzzle before lunchtime?",
    "Do they study English after soccer practice?",
    "Will your team finish homework before dinner?",
    "Are we meeting classmates at the library?",
    "Does she always carry pencils in class?",
    "Can birds really fly above city buildings?",
    "Will they present projects during science class?",
    "Do you usually read novels after school?"
  ];

  const pairBase = ['big|huge','small|tiny','start|begin','quick|fast'];

  const wheelTasks = [
    'Say one sentence in present simple about your daily routine.',
    'Write one sentence using because and one using although.',
    'Ask for directions politely in English.',
    'Give one prediction about tomorrow using will.',
    'Say 3 healthy habits using should.'
  const HARD_ORDER_SENTENCES = [
    "Although it was raining, we finished homework before dinner.",
    "If they study consistently, they can solve harder grammar tasks.",
    "After she revised carefully, she answered every question correctly.",
    "Because the timer was short, we prioritized the key clues.",
    "When students collaborate effectively, they build stronger sentence accuracy.",
    "Even if words look similar, context usually reveals correct order.",
    "Before the bell rang, our team completed the full challenge.",
    "While the ghosts moved faster, we still stayed focused together."
  ];

  const anagrams = [
    {scrambled:'LEAPP', answer:'APPLE'},
    {scrambled:'RYECCL', answer:'RECYCLE'},
    {scrambled:'MOREHOKW', answer:'HOMEWORK'},
    {scrambled:'TACOHB', answer:'CHATBOT'}
  const CATEGORY_TASKS = [
    {
      prompt: "Find all past-tense verbs",
      words: ["played","walked","was","jumped","studied","cooked","wrote","sang","visited","opened","teacher","happy","window"],
      targets: ["played","walked","was","jumped","studied","cooked","wrote","sang","visited","opened"]
    },
    {
      prompt: "Find all adjectives",
      words: ["beautiful","small","blue","happy","ancient","quiet","bright","careful","gentle","modern","table","teacher","running"],
      targets: ["beautiful","small","blue","happy","ancient","quiet","bright","careful","gentle","modern"]
    },
    {
      prompt: "Find all nouns",
      words: ["book","teacher","school","window","river","planet","student","pencil","kitchen","garden","quickly","jumped","blue"],
      targets: ["book","teacher","school","window","river","planet","student","pencil","kitchen","garden"]
    }
  ];

  function persist(){
    localStorage.setItem('pitGamesV4', JSON.stringify({score:state.score, stars:state.stars, best:state.best}));
  }
  const GRID = 10;
  const TILE_PX = 64;
  const WALL_DENSITY = 0.12;

  const $ = (id) => document.getElementById(id);
  const screens = { menu: $("menuScreen"), pac: $("pacScreen") };

  const board = $("board");
  const feedback = $("feedback");
  const progressRow = $("progressRow");
  const timerEl = $("timer");
  const livesEl = $("lives");
  const objectiveEl = $("objectiveText");
  const sideObjectiveEl = $("sideObjective");
  const phrasesDoneEl = $("phrasesDone");
  const statusTextEl = $("statusText");
  const levelTextEl = $("levelText");
  const assignInfo = $("assignInfo");

  function hud(){
    document.getElementById('score').textContent = state.score;
    document.getElementById('stars').textContent = state.stars;
    document.getElementById('best').textContent = state.best;
  }
  const state = {
    running: false,
    grid: [],
    words: [],
    tokens: [],
    expected: 0,
    targetsSet: new Set(),
    foundTargets: new Set(),
    mode: "order",
    prompt: "",
    pac: {x: 0, y: 0, dir: "right"},
    ghosts: [],
    level: "easy",
    lives: 3,
    seconds: 0,
    timerRef: null,
    ghostRef: null,
    currentSentence: "",
    lastMoveAt: 0,
    phrasesDone: 0,
    statusText: "In play"
  };

  function tip(text){
    document.getElementById('tip').textContent = text;
  function shuffle(arr){
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random()*(i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }
  function pad2(n){ return String(n).padStart(2,"0"); }
  function setScreen(name){ Object.values(screens).forEach(s => s.classList.remove("active")); screens[name].classList.add("active"); }
  function setFB(msg, cls=""){ feedback.className = "feedback" + (cls ? ` ${cls}` : ""); feedback.textContent = msg; }

  function addScore(points, app){
    state.score += points;
    if(app) state.best = app;
    hud();
    persist();
  function objectiveLabel(){
    if (state.mode !== "order") return state.prompt;
    return state.level === "hard" ? "Order words in the complex sentence." : "Order words in the sentence.";
  }

  function addStar(app){
    state.stars += 1;
    state.best = app;
    hud();
    persist();
  function updateHUD(){
    timerEl.textContent = `${pad2(Math.floor(state.seconds/60))}:${pad2(state.seconds%60)}`;
    livesEl.textContent = String(state.lives);
    objectiveEl.textContent = objectiveLabel();
    sideObjectiveEl.textContent = objectiveLabel();
    phrasesDoneEl.textContent = String(state.phrasesDone);
    statusTextEl.textContent = state.statusText;
    levelTextEl.textContent = state.level === "hard" ? "Hard" : "Easy";
  }

  function startTimer(){
    if(state.timerRef) return;
    state.timerRef = setInterval(()=>{
      if(state.paused) return;
      state.seconds++;
      const m = String(Math.floor(state.seconds/60)).padStart(2,'0');
      const s = String(state.seconds%60).padStart(2,'0');
      document.getElementById('timer').textContent = `${m}:${s}`;
    },1000);
  function updateAssign(){
    const skills = ["Word order", "Past-tense verbs", "Adjectives", "Nouns"];
    const pick = skills[Math.floor(Math.random()*skills.length)];
    assignInfo.innerHTML = `Game: PacSentence ¬∑ Auto-assigned skill: <b>${pick}</b>`;
  }

  function activatePanel(panel){
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(`panel-${panel}`).classList.add('active');
    document.querySelectorAll('.gameBtn').forEach(b=>b.classList.remove('active'));
    document.querySelector(`.gameBtn[data-panel="${panel}"]`).classList.add('active');
  function buildGrid(){
    const g = Array.from({length: GRID}, () => Array(GRID).fill(0));
    for (let x=0; x<GRID; x++){ g[0][x]=1; g[GRID-1][x]=1; }
    for (let y=0; y<GRID; y++){ g[y][0]=1; g[y][GRID-1]=1; }
    for (let y=1; y<GRID-1; y++) for (let x=1; x<GRID-1; x++){
      if ((x===1 && y===1) || (x===GRID-2 && y===GRID-2)) continue;
      if (Math.random() < WALL_DENSITY) g[y][x]=1;
    }
    for (let y=1; y<=2; y++) for (let x=1; x<=2; x++) g[y][x]=0;
    for (let y=GRID-3; y<=GRID-2; y++) for (let x=GRID-3; x<=GRID-2; x++) g[y][x]=0;
    state.grid = g;
  }

  // Quiz app
  function renderQuiz(){
    const q = quizData[state.quizIndex];
    state.quizAnswered = false;
    document.getElementById('quizQuestion').textContent = `Q${state.quizIndex+1}/3 ‚Äî ${q.q}`;
    document.getElementById('quizAnswers').innerHTML = q.options.map((opt,i)=>`<button data-i="${i}">${opt}</button>`).join('');
    document.getElementById('quizFeedback').textContent = '';
    document.getElementById('quizFeedback').className = 'feedback';
    document.getElementById('quizNext').disabled = true;

    document.querySelectorAll('#quizAnswers button').forEach(btn=>{
      btn.addEventListener('click',()=>answerQuiz(Number(btn.dataset.i)));
    });
  function emptyCells(){
    const cells = [];
    for (let y=1; y<GRID-1; y++) for (let x=1; x<GRID-1; x++) if (state.grid[y][x] === 0) cells.push({x,y});
    return cells;
  }

  function answerQuiz(choice){
    if(state.quizAnswered) return;
    state.quizAnswered = true;
    const q = quizData[state.quizIndex];
    const fb = document.getElementById('quizFeedback');

    document.querySelectorAll('#quizAnswers button').forEach((btn,i)=>{
      btn.disabled = true;
      if(i === q.correct) btn.classList.add('correct');
      if(i === choice && choice !== q.correct) btn.classList.add('wrong');
    });

    if(choice === q.correct){
      state.quizCorrect++;
      addScore(10,'Quiz');
      fb.textContent = '‚úÖ Correct! +10';
      fb.className = 'feedback ok';
    } else {
      fb.textContent = `‚ùå Wrong. Correct: ${q.options[q.correct]}`;
      fb.className = 'feedback bad';
  function makeRound(){
    const categoryMode = Math.random() < 0.45;
    if (categoryMode){
      const task = CATEGORY_TASKS[Math.floor(Math.random()*CATEGORY_TASKS.length)];
      state.mode = "category";
      state.prompt = task.prompt;
      state.currentSentence = task.prompt;
      state.tokens = [...task.words];
      state.targetsSet = new Set(task.targets);
      state.foundTargets = new Set();
      state.expected = 0;

      const items = shuffle(task.words.map(w => ({word:w, isTarget: state.targetsSet.has(w)})));
      const cells = shuffle(emptyCells().filter(c => !(c.x===1 && c.y===1) && !(c.x===GRID-2 && c.y===GRID-2)));
      state.words = items.slice(0, cells.length).map((it, i) => ({ word: it.word, idx: -1, isCorrect: it.isTarget, eaten: false, x: cells[i].x, y: cells[i].y }));
      return;
    }

    document.getElementById('quizNext').disabled = false;
    const bank = state.level === "hard" ? HARD_ORDER_SENTENCES : ORDER_SENTENCES;
    const sentence = bank[Math.floor(Math.random()*bank.length)];
    state.mode = "order";
    state.prompt = "";
    state.currentSentence = sentence;
    state.tokens = sentence.trim().split(/\s+/);
    state.expected = 0;
    state.targetsSet = new Set();
    state.foundTargets = new Set();

    const pool = new Set();
    bank.forEach(s => { if (s!==sentence) s.trim().split(/\s+/).forEach(w => pool.add(w)); });
    const distractors = shuffle([...pool]).slice(0, 2);
    const items = shuffle(state.tokens.map((w,i)=>({word:w, idx:i, isCorrect:true})).concat(distractors.map(w=>({word:w, idx:-1, isCorrect:false}))));
    const cells = shuffle(emptyCells().filter(c => !(c.x===1 && c.y===1) && !(c.x===GRID-2 && c.y===GRID-2)));
    state.words = items.slice(0, cells.length).map((it, i) => ({word:it.word, idx:it.idx, isCorrect:it.isCorrect, eaten:false, x:cells[i].x, y:cells[i].y}));
  }

  function nextQuiz(){
    if(state.quizIndex < quizData.length - 1){
      state.quizIndex++;
      renderQuiz();
      return;
  function buildProgress(){
    progressRow.innerHTML = "";
    const total = state.mode === "order" ? state.tokens.length : state.targetsSet.size;
    const done = state.mode === "order" ? state.expected : state.foundTargets.size;
    for (let i=0; i<total; i++){
      const d=document.createElement("div");
      d.className = "slot" + (i < done ? " filled" : "");
      d.textContent = i < done ? "‚úì" : "_";
      progressRow.appendChild(d);
    }
  }

    const passed = state.quizCorrect >= 2;
    const fb = document.getElementById('quizFeedback');
    if(passed){
      addStar('Quiz');
      addScore(20,'Quiz');
      fb.textContent = `üèÜ Quiz cleared (${state.quizCorrect}/3). Star earned.`;
      fb.className = 'feedback ok';
    } else {
      fb.textContent = `‚ö†Ô∏è Quiz result ${state.quizCorrect}/3. Need 2/3 for a star.`;
      fb.className = 'feedback bad';
  function render(){
    board.style.gridTemplateColumns = `repeat(${GRID}, 1fr)`;
    board.style.gridAutoRows = `${TILE_PX}px`;
    board.innerHTML = "";
    for (let y=0; y<GRID; y++) for (let x=0; x<GRID; x++){
      const cell = document.createElement("div");
      cell.className = "cell";
      if (state.grid[y][x] === 1) cell.classList.add("wall");

      const w = state.words.find(it => !it.eaten && it.x===x && it.y===y);
      if (w){
        cell.classList.add("word");
        const text = w.word;
        cell.textContent = text.length > 12 ? text.slice(0,12) : text;
        cell.style.fontSize = text.length <= 9 ? "19px" : "16px";
      }

      for (const g of state.ghosts){
        if (g.x===x && g.y===y){
          cell.classList.add(g.color === "pink" ? "ghost-pink" : "ghost-blue");
          cell.textContent = "";
        }
      }

      if (state.pac.x===x && state.pac.y===y){
        cell.classList.add("pac");
        cell.textContent = "";
        const rot = {right:"0deg",down:"90deg",left:"180deg",up:"270deg"}[state.pac.dir] || "0deg";
        cell.style.setProperty("--rot", rot);
      }
      board.appendChild(cell);
    }
    document.getElementById('quizNext').disabled = true;
  }

  function restartQuiz(){
    state.quizIndex = 0;
    state.quizCorrect = 0;
    renderQuiz();
  function stopLoops(){ clearInterval(state.timerRef); clearInterval(state.ghostRef); state.timerRef=null; state.ghostRef=null; }
  function startLoops(){
    stopLoops();
    state.timerRef = setInterval(() => { if(!state.running) return; state.seconds++; updateHUD(); }, 1000);
    const ghostTick = state.level === "hard" ? 620 : 980;
    state.ghostRef = setInterval(() => {
      if(!state.running) return;
      moveGhosts();
      checkCollision();
      render();
    }, ghostTick);
  }

  // Matching pairs app
  function setupPairs(){
    const deck = [];
    pairBase.forEach((pair,idx)=>{
      const [a,b] = pair.split('|');
      deck.push({id:`${idx}a`,pair:idx,text:a,open:false,matched:false});
      deck.push({id:`${idx}b`,pair:idx,text:b,open:false,matched:false});
    });
    state.pairsDeck = deck.sort(()=>Math.random()-0.5);
    state.pairsOpen = [];
    document.getElementById('pairsFeedback').textContent = '';
    drawPairs();
  function resetPositions(){
    state.pac = {x:1,y:1,dir:"right"};
    state.ghosts = state.level === "hard"
      ? [{x:GRID-2,y:GRID-2,color:"blue"},{x:GRID-2,y:1,color:"pink"}]
      : [{x:GRID-2,y:GRID-2,color:"blue"}];
  }

  function drawPairs(){
    const board = document.getElementById('pairsBoard');
    board.innerHTML = state.pairsDeck.map((card,i)=>`<button class="pairCard ${card.open?'open':''} ${card.matched?'matched':''}" data-i="${i}">${(card.open||card.matched)?card.text:'?'}</button>`).join('');
    board.querySelectorAll('button').forEach(btn=>btn.addEventListener('click',()=>flipPair(Number(btn.dataset.i))));
  function startGame(level){
    if (level) state.level = level;
    updateAssign();
    buildGrid();
    resetPositions();
    state.seconds=0;
    state.lives=3;
    state.phrasesDone=0;
    state.statusText="In play";
    state.running=true;
    makeRound();
    buildProgress();
    updateHUD();
    render();
    setFB("Start: complete the objective and avoid the ghosts.", "ok");
    startLoops();
  }

  function flipPair(i){
    const c = state.pairsDeck[i];
    if(!c || c.open || c.matched || state.pairsOpen.length===2) return;

    c.open = true;
    state.pairsOpen.push(c);
    drawPairs();

    if(state.pairsOpen.length===2){
      const [a,b] = state.pairsOpen;
      if(a.pair===b.pair){
        a.matched = true;
        b.matched = true;
        state.pairsOpen = [];
        addScore(12,'Pairs');
        document.getElementById('pairsFeedback').textContent = '‚úÖ Match! +12';
        document.getElementById('pairsFeedback').className = 'feedback ok';
        if(state.pairsDeck.every(x=>x.matched)){
          addStar('Pairs');
          document.getElementById('pairsFeedback').textContent = 'üèÜ All pairs found. Star earned.';
        }
      } else {
        document.getElementById('pairsFeedback').textContent = '‚ùå Not a pair.';
        document.getElementById('pairsFeedback').className = 'feedback bad';
        setTimeout(()=>{
          a.open = false;
          b.open = false;
          state.pairsOpen = [];
          drawPairs();
        },600);
      }
    }
  function nextSentence(){
    buildGrid();
    resetPositions();
    state.seconds=0;
    state.statusText="In play";
    state.running=true;
    makeRound();
    buildProgress();
    updateHUD();
    render();
    setFB("New round started.", "ok");
  }

  function move(dir){
    if (!state.running) return;
    const now = Date.now(); if (now - state.lastMoveAt < 85) return; state.lastMoveAt = now;
    const v = {up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]}[dir]; if (!v) return;
    state.pac.dir = dir;
    const nx = state.pac.x + v[0], ny = state.pac.y + v[1];
    if (state.grid[ny]?.[nx] === 1) { render(); return; }
    state.pac.x = nx; state.pac.y = ny;
    eatIfWord(); checkCollision(); render();
  }

  // Wheel app
  function spinWheel(){
    const task = wheelTasks[Math.floor(Math.random()*wheelTasks.length)];
    document.getElementById('wheelResult').textContent = task;
    document.getElementById('wheelFeedback').textContent = '‚úÖ Challenge generated. +5 points';
    document.getElementById('wheelFeedback').className = 'feedback ok';
    addScore(5,'Wheel');
  function finishRound(){
    state.running=false;
    stopLoops();
    state.phrasesDone++;
    state.statusText="Round completed";
    updateHUD();
    setFB("üèÜ Correct! Press ‚ÄúNext round‚Äù.", "ok");
  }

  // Anagram app
  function renderAnagram(){
    const item = anagrams[state.anagramIndex];
    document.getElementById('anagramWord').textContent = item.scrambled;
    document.getElementById('anagramInput').value = '';
    document.getElementById('anagramFeedback').textContent = '';
    document.getElementById('anagramFeedback').className = 'feedback';
  function loseRound(message){
    state.running=false;
    stopLoops();
    state.statusText="You lost";
    updateHUD();
    let reveal = "";
    if (state.mode === "order") reveal = ` Correct order: ${state.currentSentence}`;
    else reveal = ` Correct words: ${[...state.targetsSet].join(", ")}`;
    setFB(`${message}${reveal}`, "bad");
  }

  function checkAnagram(){
    const item = anagrams[state.anagramIndex];
    const input = document.getElementById('anagramInput').value.trim().toUpperCase();
    const fb = document.getElementById('anagramFeedback');
  function eatIfWord(){
    const item = state.words.find(w => !w.eaten && w.x===state.pac.x && w.y===state.pac.y); if (!item) return;

    if(!input){
      fb.textContent = 'Type an answer first.';
      fb.className = 'feedback bad';
    if (state.mode === "order"){
      const expected = state.tokens[state.expected];
      if (item.isCorrect && item.idx === state.expected && item.word === expected){
        item.eaten = true; state.expected++; buildProgress(); updateHUD();
        if (state.expected >= state.tokens.length) return finishRound();
        setFB("‚úÖ Correct. Keep going.", "ok");
      } else {
        item.eaten = true; state.lives--; updateHUD();
        if (state.lives <= 0) return loseRound("üíÄ No lives left.");
        setFB("‚ùå Incorrect word for this step.", "bad");
      }
      return;
    }

    if(input === item.answer){
      fb.textContent = '‚úÖ Correct anagram! +10';
      fb.className = 'feedback ok';
      addScore(10,'Anagram');
      if(item.answer === 'CHATBOT') addStar('Anagram');
    if (item.isCorrect){
      item.eaten = true;
      state.foundTargets.add(item.word + '|' + state.pac.x + '|' + state.pac.y);
      buildProgress();
      if (state.foundTargets.size >= state.targetsSet.size) return finishRound();
      setFB("‚úÖ Correct. Keep finding target words.", "ok");
    } else {
      fb.textContent = `‚ùå Not correct. Try again.`;
      fb.className = 'feedback bad';
      item.eaten = true; state.lives--; updateHUD();
      if (state.lives <= 0) return loseRound("üíÄ No lives left.");
      setFB("‚ùå That word is not part of the target category.", "bad");
    }
  }

  function nextAnagram(){
    state.anagramIndex = (state.anagramIndex + 1) % anagrams.length;
    renderAnagram();
  function moveGhost(g){
    const dx = state.pac.x - g.x, dy = state.pac.y - g.y;
    let stepX=0, stepY=0;
    if (Math.abs(dx) >= Math.abs(dy) && dx !== 0) stepX = Math.sign(dx); else if (dy !== 0) stepY = Math.sign(dy);
    const candidates = [
      {x: g.x + stepX, y: g.y + stepY},
      {x: g.x + Math.sign(dx), y: g.y},
      {x: g.x, y: g.y + Math.sign(dy)},
      {x: g.x + 1, y: g.y}, {x: g.x - 1, y: g.y},
      {x: g.x, y: g.y + 1}, {x: g.x, y: g.y - 1},
    ];
    for (const c of candidates){ if (c.x<1 || c.y<1 || c.x>GRID-2 || c.y>GRID-2) continue; if (state.grid[c.y][c.x] === 1) continue; g.x=c.x; g.y=c.y; return; }
  }

  function resetAll(){
    localStorage.removeItem('pitGamesV4');
    state.score = 0;
    state.stars = 0;
    state.best = '-';
    state.quizIndex = 0;
    state.quizCorrect = 0;
    state.anagramIndex = 0;
    hud();
    restartQuiz();
    setupPairs();
    renderAnagram();
    document.getElementById('wheelResult').textContent = 'Press SPIN to get a challenge.';
    document.getElementById('wheelFeedback').textContent = '';
    tip('Reset complete. Choose an app and play.');
  function moveGhosts(){ for (const g of state.ghosts) moveGhost(g); }

  function checkCollision(){
    if (!state.running) return;
    const hit = state.ghosts.some(g => g.x === state.pac.x && g.y === state.pac.y);
    if (!hit) return;
    state.lives--; updateHUD();
    if (state.lives <= 0) return loseRound("üëª A ghost caught you.");
    state.pac={x:1,y:1,dir:"right"};
    setFB("üëª A ghost touched you. You lose 1 life.", "warn");
  }

  // events
  document.querySelectorAll('.gameBtn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      activatePanel(btn.dataset.panel);
      tip(`Now using ${btn.textContent.split('\n')[0].trim()}.`);
    });
  $("startEasyBtn").addEventListener("click", () => { setScreen("pac"); startGame("easy"); });
  $("startHardBtn").addEventListener("click", () => { setScreen("pac"); startGame("hard"); });
  $("backToMenu").addEventListener("click", () => { state.running=false; stopLoops(); setScreen("menu"); });
  $("restartGame").addEventListener("click", () => startGame(state.level));
  $("nextSentence").addEventListener("click", () => nextSentence());

  document.querySelectorAll("[data-dir]").forEach(btn => btn.addEventListener("click", () => move(btn.dataset.dir)));
  window.addEventListener("keydown", (e) => {
    const map = {ArrowUp:"up", ArrowDown:"down", ArrowLeft:"left", ArrowRight:"right", w:"up", W:"up", s:"down", S:"down", a:"left", A:"left", d:"right", D:"right"};
    if (!map[e.key]) return; e.preventDefault(); move(map[e.key]);
  });

  document.getElementById('quizNext').addEventListener('click', nextQuiz);
  document.getElementById('quizRestart').addEventListener('click', restartQuiz);
  document.getElementById('pairsRestart').addEventListener('click', setupPairs);
  document.getElementById('wheelSpin').addEventListener('click', spinWheel);
  document.getElementById('anagramCheck').addEventListener('click', checkAnagram);
  document.getElementById('anagramNext').addEventListener('click', nextAnagram);
  document.getElementById('pauseBtn').addEventListener('click', ()=>{ state.paused = !state.paused; tip(state.paused ? 'Timer paused.' : 'Timer resumed.'); });
  document.getElementById('resetBtn').addEventListener('click', resetAll);

  // init
  hud();
  restartQuiz();
  setupPairs();
  renderAnagram();
  startTimer();
  setFB("Open PacSentence from the menu to play.", "");
  updateHUD();
})();
</script>

</body>
</html>
