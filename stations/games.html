<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THE PIT â€“ Games Station Arcade</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#dbeafe;
      --bg2:#2563eb;
      --bg3:#0b1a44;
      --ink:#0f172a;
      --brand:#1d4ed8;
      --soft:#eff6ff;
      --ok:#166534;
      --bad:#991b1b;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Orbitron',sans-serif;
      background:radial-gradient(circle,var(--bg1) 0%,var(--bg2) 56%,var(--bg3) 100%);
      color:var(--ink);
    }

    .app{
      width:min(1120px,94vw);
      margin:20px auto 100px;
      background:#fff;
      border-radius:22px;
      padding:18px;
      box-shadow:0 24px 48px rgba(2,6,23,.45);
    }

    h1{margin:0;text-align:center;color:#1e3a8a}
    .sub{margin:6px 0 14px;text-align:center;color:#1d4ed8;font-size:12px}

    .hud{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px;margin-bottom:12px}
    .hudBox{background:var(--soft);border:2px solid #93c5fd;border-radius:12px;padding:10px;font-size:12px;font-weight:800;color:#1e3a8a}

    .tip{background:#ecfeff;border:2px solid #67e8f9;border-radius:10px;padding:10px;font-size:12px;color:#0f766e;margin-bottom:10px}

    .tabs{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:8px;margin-bottom:12px}
    .tabBtn{border:0;border-radius:10px;padding:10px;font-family:inherit;font-size:11px;font-weight:800;background:#dbeafe;color:#1e3a8a;cursor:pointer}
    .tabBtn.active{background:#2563eb;color:#fff}

    .panel{display:none;background:#f8fafc;border:2px solid #cbd5e1;border-radius:14px;padding:12px}
    .panel.active{display:block}

    .defsGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px}
    .defCard{background:#eff6ff;border:1px solid #bfdbfe;border-radius:10px;padding:8px}
    .defCard b{display:block;color:#1e40af;font-size:12px;margin-bottom:4px}
    .defCard span{font-size:11px;color:#334155;line-height:1.35}

    .qTitle{font-size:13px;margin:0 0 8px;color:#1e3a8a}
    .answers{display:grid;gap:8px}
    .answers button{border:2px solid #bfdbfe;background:#fff;color:#1e3a8a;border-radius:10px;padding:10px;text-align:left;font-family:inherit;font-size:11px;font-weight:800;cursor:pointer}
    .answers button:disabled{cursor:not-allowed;opacity:.8}
    .answers button.correct{background:#dcfce7;border-color:#22c55e;color:var(--ok)}
    .answers button.wrong{background:#fee2e2;border-color:#ef4444;color:var(--bad)}

    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .btn{border:0;border-radius:10px;padding:10px 12px;font-family:inherit;font-size:11px;font-weight:900;cursor:pointer}
    .btnPrimary{background:#2563eb;color:#fff}
    .btnSoft{background:#e2e8f0;color:#0f172a}
    .feedback{margin-top:8px;min-height:18px;font-size:12px;font-weight:800}
    .ok{color:var(--ok)}
    .bad{color:var(--bad)}

    .board{display:grid;grid-template-columns:repeat(4,minmax(70px,1fr));gap:8px;margin-top:8px}
    .card{height:70px;border-radius:10px;border:2px solid #bfdbfe;background:#dbeafe;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;text-align:center;padding:6px;cursor:pointer}
    .card.open,.card.matched{background:#fff}
    .card.matched{border-color:#86efac;color:#166534}

    .wheelBox{display:grid;gap:8px}
    .wheelResult{background:#eff6ff;border:2px dashed #93c5fd;border-radius:10px;padding:10px;font-size:12px;font-weight:800;color:#1e3a8a}

    .fixed{
      position:fixed;left:0;right:0;bottom:0;
      background:#0f172a;border-top:2px solid #1e293b;
      display:flex;justify-content:center;gap:8px;flex-wrap:wrap;
      padding:8px;z-index:30;
    }
    .fixed button{border:0;border-radius:10px;padding:8px 10px;background:#dbeafe;color:#1e3a8a;font-family:inherit;font-size:11px;font-weight:900;cursor:pointer}

    @media (max-width:640px){
      .app{margin:10px auto 86px;padding:12px}
      .board{grid-template-columns:repeat(4,minmax(56px,1fr))}
      .card{height:60px;font-size:10px}
    }
  </style>
</head>
<body>
  <main class="app">
    <h1>GAMES STATION ARCADE</h1>
    <p class="sub">Whole new responsive version â€¢ clear feedback â€¢ playable games</p>

    <section class="hud">
      <div class="hudBox">SCORE: <span id="score">0</span></div>
      <div class="hudBox">STARS: <span id="stars">0</span></div>
      <div class="hudBox">TIME: <span id="timer">00:00</span></div>
      <div class="hudBox">BEST: <span id="best">-</span></div>
    </section>

    <div class="tip"><strong>Tip:</strong> <span id="tip">Choose a tab and play. Every correct action gives points.</span></div>

    <section class="tabs" id="tabs"></section>

    <section id="panel-definitions" class="panel active">
      <h3 class="qTitle">Activity Definitions</h3>
      <div class="defsGrid" id="defsGrid"></div>
    </section>

    <section id="panel-quiz" class="panel">
      <h3 class="qTitle" id="quizQ">Question</h3>
      <div class="answers" id="quizAnswers"></div>
      <div class="feedback" id="quizFb"></div>
      <div class="row">
        <button class="btn btnPrimary" id="quizNext">Next Question</button>
      </div>
    </section>

    <section id="panel-pairs" class="panel">
      <h3 class="qTitle">Matching Pairs</h3>
      <p class="sub" style="text-align:left;margin:0 0 6px">Find all matching pairs.</p>
      <div class="board" id="pairsBoard"></div>
      <div class="feedback" id="pairsFb"></div>
      <div class="row">
        <button class="btn btnPrimary" id="pairsRestart">Restart Pairs</button>
      </div>
    </section>

    <section id="panel-wheel" class="panel">
      <h3 class="qTitle">Spin the Wheel</h3>
      <div class="wheelBox">
        <button class="btn btnPrimary" id="spinBtn">SPIN</button>
        <div class="wheelResult" id="wheelResult">Spin to get a random speaking/writing challenge.</div>
      </div>
      <div class="feedback" id="wheelFb"></div>
    </section>
  </main>

  <div class="fixed">
    <button onclick="location.href='../index.html'">Main Menu</button>
    <button id="pauseBtn">Pause/Resume Timer</button>
    <button id="resetBtn">Reset Arcade</button>
  </div>

<script>
  const definitions = [
    ['Quiz','A series of multiple choice questions. Tap the correct answer to proceed.'],
    ['Flash cards','Test yourself using cards with prompts on the front and answers on the back.'],
    ['Speaking cards','Deal out cards at random from a shuffled deck.'],
    ['Group sort','Drag and drop each item into its correct group.'],
    ['Spin the wheel','Spin the wheel to see which item comes up next.'],
    ['Complete the sentence','A cloze activity where you drag and drop words into blank spaces within a text.'],
    ['Anagram','Drag the letters into their correct positions to unscramble the word or phrase.'],
    ['Find the match','Tap the matching answer to eliminate it. Repeat until all answers are gone.'],
    ['Unjumble','Drag and drop words to rearrange each sentence into its correct order.'],
    ['Matching pairs','Tap a pair of tiles at a time to reveal if they are a match.'],
    ['Open the box','Tap each box in turn to open them up and reveal the item inside.'],
    ['Fishing bowl','Catch the correct item from the bowl to complete the challenge.']
  ];

  const tabs = [
    ['definitions','Definitions'],
    ['quiz','Quiz'],
    ['pairs','Matching Pairs'],
    ['wheel','Spin the Wheel']
  ];

  const quizData = [
    {q:'Choose the correct sentence.', options:['She go to school.','She goes to school.','She going to school.','She gone to school.'], correct:1},
    {q:'Past simple of "eat" is...', options:['eat','eaten','ate','eated'], correct:2},
    {q:'Complete: "If I study, I ____ pass."', options:['will','am','did','was'], correct:0},
    {q:'Find the adjective.', options:['run','quickly','beautiful','eat'], correct:2}
  ];

  const wheelChallenges = [
    'Say a 10-second introduction using present simple.',
    'Write one sentence with because and one with although.',
    'Make a prediction with will about next weekend.',
    'Ask and answer one question in past simple.',
    'Give 3 healthy habits using should.'
  ];

  const pairWords = ['big|huge','small|tiny','start|begin','quick|fast','happy|glad','finish|end'];

  const state = {
    score:0,
    stars:0,
    best:'-',
    paused:false,
    seconds:0,
    timerRef:null,
    quizIndex:0,
    quizAnswered:false,
    deck:[],
    open:[]
  };

  function save(){
    localStorage.setItem('pitArcadeV2', JSON.stringify({score:state.score,stars:state.stars,best:state.best}));
  }

  function load(){
    const raw = localStorage.getItem('pitArcadeV2');
    if(!raw) return;
    try{
      const p = JSON.parse(raw);
      state.score = p.score || 0;
      state.stars = p.stars || 0;
      state.best = p.best || '-';
    }catch(e){
      localStorage.removeItem('pitArcadeV2');
    }
  }

  function hud(){
    document.getElementById('score').textContent = state.score;
    document.getElementById('stars').textContent = state.stars;
    document.getElementById('best').textContent = state.best;
  }

  function setTip(msg){ document.getElementById('tip').textContent = msg; }

  function startTimer(){
    if(state.timerRef) return;
    state.timerRef = setInterval(()=>{
      if(state.paused) return;
      state.seconds++;
      const m = String(Math.floor(state.seconds/60)).padStart(2,'0');
      const s = String(state.seconds%60).padStart(2,'0');
      document.getElementById('timer').textContent = `${m}:${s}`;
    },1000);
  }

  function addPoints(points, mode){
    state.score += points;
    if(mode){
      state.best = mode;
    }
    hud();
    save();
  }

  function addStar(mode){
    state.stars += 1;
    state.best = mode;
    hud();
    save();
  }

  function buildTabs(){
    const host = document.getElementById('tabs');
    host.innerHTML = tabs.map(([id,label],i)=>`<button class="tabBtn ${i===0?'active':''}" data-target="${id}">${label}</button>`).join('');
    host.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click',()=>activatePanel(btn.dataset.target, btn));
    });
  }

  function activatePanel(name, clickedBtn){
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(`panel-${name}`).classList.add('active');
    document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('active'));
    if(clickedBtn) clickedBtn.classList.add('active');
  }

  function renderDefinitions(){
    document.getElementById('defsGrid').innerHTML = definitions.map(([name,def])=>`<div class="defCard"><b>${name}</b><span>${def}</span></div>`).join('');
  }

  function renderQuiz(){
    const item = quizData[state.quizIndex];
    state.quizAnswered = false;
    document.getElementById('quizQ').textContent = `Q${state.quizIndex+1}/${quizData.length}: ${item.q}`;
    document.getElementById('quizAnswers').innerHTML = item.options.map((opt,i)=>`<button data-i="${i}">${opt}</button>`).join('');
    document.getElementById('quizFb').textContent = '';

    document.querySelectorAll('#quizAnswers button').forEach(btn=>{
      btn.addEventListener('click',()=>answerQuiz(Number(btn.dataset.i)));
    });
  }

  function answerQuiz(choice){
    if(state.quizAnswered) return;
    state.quizAnswered = true;
    const item = quizData[state.quizIndex];
    const fb = document.getElementById('quizFb');

    document.querySelectorAll('#quizAnswers button').forEach((btn,i)=>{
      btn.disabled = true;
      if(i === item.correct) btn.classList.add('correct');
      if(i === choice && choice !== item.correct) btn.classList.add('wrong');
    });

    if(choice === item.correct){
      fb.textContent = 'âœ… Correct! +10 points';
      fb.className = 'feedback ok';
      addPoints(10,'Quiz');
    } else {
      fb.textContent = `âŒ Wrong. Correct answer: ${item.options[item.correct]}`;
      fb.className = 'feedback bad';
    }
  }

  function nextQuiz(){
    state.quizIndex = (state.quizIndex + 1) % quizData.length;
    if(state.quizIndex === 0){
      addStar('Quiz');
      setTip('Quiz loop completed. Star earned!');
    }
    renderQuiz();
  }

  function setupPairs(){
    const cards = [];
    pairWords.forEach((pair,idx)=>{
      const [a,b] = pair.split('|');
      cards.push({id:`${idx}-a`,pair:idx,text:a,open:false,matched:false});
      cards.push({id:`${idx}-b`,pair:idx,text:b,open:false,matched:false});
    });

    state.deck = cards.sort(()=>Math.random()-0.5);
    state.open = [];
    document.getElementById('pairsFb').textContent = '';
    drawPairs();
  }

  function drawPairs(){
    const board = document.getElementById('pairsBoard');
    board.innerHTML = state.deck.map((c,i)=>`<button class="card ${c.open?'open':''} ${c.matched?'matched':''}" data-idx="${i}">${(c.open||c.matched)?c.text:'?'}</button>`).join('');
    board.querySelectorAll('.card').forEach(btn=>btn.addEventListener('click',()=>flipCard(Number(btn.dataset.idx))));
  }

  function flipCard(i){
    const c = state.deck[i];
    if(!c || c.open || c.matched || state.open.length === 2) return;

    c.open = true;
    state.open.push(c);
    drawPairs();

    if(state.open.length === 2){
      const [a,b] = state.open;
      if(a.pair === b.pair){
        a.matched = true;
        b.matched = true;
        state.open = [];
        addPoints(12,'Matching Pairs');
        document.getElementById('pairsFb').textContent = 'âœ… Match! +12 points';
        document.getElementById('pairsFb').className = 'feedback ok';

        if(state.deck.every(x=>x.matched)){
          addStar('Matching Pairs');
          document.getElementById('pairsFb').textContent = 'ðŸ† Board cleared! Star earned.';
        }
      } else {
        document.getElementById('pairsFb').textContent = 'âŒ Not a pair.';
        document.getElementById('pairsFb').className = 'feedback bad';
        setTimeout(()=>{
          a.open = false;
          b.open = false;
          state.open = [];
          drawPairs();
        },600);
      }
    }
  }

  function spinWheel(){
    const pick = wheelChallenges[Math.floor(Math.random()*wheelChallenges.length)];
    document.getElementById('wheelResult').textContent = pick;
    document.getElementById('wheelFb').textContent = 'âœ… New challenge ready. +5 points';
    document.getElementById('wheelFb').className = 'feedback ok';
    addPoints(5,'Spin the Wheel');
  }

  function resetArcade(){
    localStorage.removeItem('pitArcadeV2');
    state.score = 0;
    state.stars = 0;
    state.best = '-';
    state.quizIndex = 0;
    hud();
    renderQuiz();
    setupPairs();
    document.getElementById('wheelResult').textContent = 'Spin to get a random speaking/writing challenge.';
    document.getElementById('wheelFb').textContent = '';
    setTip('Arcade reset complete. Start fresh.');
  }

  // boot
  load();
  hud();
  buildTabs();
  renderDefinitions();
  renderQuiz();
  setupPairs();
  startTimer();

  document.getElementById('quizNext').addEventListener('click', nextQuiz);
  document.getElementById('pairsRestart').addEventListener('click', setupPairs);
  document.getElementById('spinBtn').addEventListener('click', spinWheel);
  document.getElementById('pauseBtn').addEventListener('click', ()=>{ state.paused = !state.paused; setTip(state.paused ? 'Timer paused.' : 'Timer resumed.'); });
  document.getElementById('resetBtn').addEventListener('click', resetArcade);
</script>
</body>
</html>
